<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Torque Exporter Readme</title>
</head>
<body>
<h1>Torque Exporter Plugin for Blender</h1>
<h2>Introduction</h2>
<p>
The Torque Exporter Plugin for Blender is a
set of python scripts that allows one to export .dts shapes from
blender scenes in .blend files.<br>
The exporter currently supports many of the core features of the DTS
format - including bones, meshes, skin weights, sequences, ground
frames, triggers, and visibility animation.
</p>
<p>
Please note that the Torque exporter plugin is still under development,
and as
such, you may encounter bugs whilst using it. If you wish to report a
bug, use the <a href="http://projects.blender.org/tracker/?group_id=95">bug
tracker</a> at the exporter project page, or create a thread on the
Garage Games <a
 href="http://www.garagegames.com/mg/forums/result.forum.php?qf=134">blender
forums</a>.<br>
</p>
<h2>Requirements</h2>
<table style="text-align: left; width: 840px; height: 149px;" border="1"
 cellpadding="1" cellspacing="1">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
      <h3>Requirement</h3>
      </td>
      <td style="vertical-align: top;">
      <h3>Description</h3>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="http://www.blender.org/download/get-blender/">Blender</a> 2.44+<br>
      </td>
      <td style="vertical-align: top;">Required by the
exporter scripts
to run.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a
 href="http://www.python.org/download/">Python</a> 2.3, 2.4 or 2.5<br>
      </td>
      <td style="vertical-align: top;">Required to run scripts in
Blender.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><a href="http://www.vtk.org">VTK</a>
+ Python Bindings<br>
      </td>
      <td style="vertical-align: top;">Optional;
Allows more efficent triangle strips to be generated.<br>
      </td>
    </tr>
  </tbody>
</table>
<h2>Installation</h2>
<ol>
  <li>Use one of the supplied installer scripts to install the
exporter. </li>
  <li>If the script failed, copy all files and folders to your
blender scripts directory. <br>
  </li>
  <li>Run blender to verify that the "Torque Shape (.dts)..."
item is located on the "Export" menu.</li>
  <li>Linux users will need to set the executable flag on
InstallScripts.sh using the command "chmod +x InstallScripts.sh"
(without quotes) before it can be executed.<br>
  </li>
</ol>
<h2>Installation Folders</h2>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2"
 cellspacing="2">
  <tbody>
    <tr>
      <td>
      <h3>Platform</h3>
      </td>
      <td>
      <h3>Script</h3>
      </td>
      <td>
      <h3>Default location</h3>
      </td>
    </tr>
    <tr>
      <td>Windows</td>
      <td>Install Scripts.js</td>
      <td>[Blender Installation Directory from
Registry]\.blender\scripts</td>
    </tr>
    <tr>
      <td>Mac OSX</td>
      <td>Install Scripts.scpt</td>
      <td>~/.blender/scripts&nbsp; or&nbsp;
/Applications/blender.app/Contents/MacOS/.blender/scripts</td>
    </tr>
    <tr>
      <td>Linux</td>
      <td>InstallScripts.sh</td>
      <td>~/.blender/scripts</td>
    </tr>
  </tbody>
</table>
<h2>How-To</h2>
<p>
The exporter relies on certain objects to be present in your scene, and
makes use of the parenting feature of blender to determine how to
structure the .dts.<br>
The example shape located in example.blend contains a working example
of how to structure content for exporting via the exporter. <br>
The example also demonstrates what will not get exported by the
exporter.
</p>
<p>
Existing content can easily be structured to export with the exporter.
</p>
<ul>
  <li>The Exporter first looks for an object called "Shape".
    <ul>
      <li>The Exporter will then check the object's children,
which
should be named as follows :
        <ul>
          <li>Detailx - Detail Marker, where "x" is the detail
level size.</li>
          <li>Collision- Collision Marker, put all your
collision meshes here.</li>
          <li>LOSCollision- LOS Collision Marker, put all
of your line of sight collision meshes here.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<p>
All objects parented (directly or indirectly) to the Detail / Collision
markers will be included
in the export in the according detail / collision level.
</p>
<p>
The first detail level (the one with the highest size) is used as a
template by the exporter.<br>
All other objects in the remaining detail levels must be named after
the objects in the first, and any stray objects will be discarded with
a warning.<br>
The exporter determines the template(or DTS Object) name by splitting
the
object's name using a ".", e.g.:<br>
<b>"myHead"</b> is associated with the DTS object <b>"myHead"</b><br>
<b>"myHead.001"</b> is associated with the DTS object <b>"myHead"</b><br>
<b>"glassWindow.001_Sort"</b> is associated with the dts
object <b>"glassWindow"</b><br>
... and so on.
</p>
<p>
<i>NOTE: Using Emptys for the markers is preferred.</i>
</p>
<h3>Sequences (Actions)</h3>
<p>
For sequences, the exporter looks for the actions in blender and
extracts the necessary keyframe data. <br>
The exporter supports loc, rot, and size animation of bones.</p>
<p>An additional feature of the sequence export is the support
for "ground frames", which are used by torque in player
animations. The basic idea is that they track the movement and rotation
of the object in an animation.&nbsp; To Export Ground Frames, the
"Ground Frames" option needs to be set
to
above
0. Select the number of groundframes to export (sampling rate), and
make sure you have an object called "Bounds" somewhere in your scene
(NOTE: it does not need to be attached to the shape empty - e.g. it
could be attached to your armature bones, or out in the middle of
nowhere).<br>
The "Bounds" object can also act as an alternative set of
bounds for your shape. for this to happen, the object needs to be of
type "Mesh"<br>
</p>
<p>There are two options available for animating the bounds when
exporting ground frames.&nbsp; If you only need one sequence with
ground frames, you can keyframe the bounds object directly.&nbsp; If
you would like to export more than one sequence with ground frames, you
can parent your bounds box directly to a bone.&nbsp; The exporter will
then pull the ground tranform data from that bone instead of the bounds
mesh object, thus allowing for separate ground frame animations for
different action sequences.&nbsp; Since the ground frames are pulled
from the raw transforms, make sure that your bounds box and/or bone are
axis alligned.<br>
</p>
<p>The exporter also supports "blend" animations which are additive in
nature.&nbsp; In order to export a blend animation, select the desired
sequence in the exporter's sequences tab.&nbsp; Press the "Blend"
button next to the sequence name.&nbsp; Two new options will appear on
the right allowing you to select the "reference pose" for your blend
animation.&nbsp; The reference pose can be chosen from any frame of any
of the available actions.&nbsp; The action containing the reference
pose does not need to be exported.<br>
</p>
<p>Finally, the "Sample Frames" option tells the exporter how many
frames to
export out of the total frames present in the Action. This defaults to
the amount of frames in the Action, but you may wish to decrease it to
save space in your shape. However, if you do this, you may loose
precision.
</p>
<p>A new feature to the exporter is the ability to animate the
object visibility, via Material ipos.<br>
To enable this, enable the "Mat Anim" option and select a starting
frame. The exporter will then go through all the Materials assigned to
your meshes and use their ipo curves(specifically, "ALPHA") to create
an DTS Object visibility track for the sequence.<br>
</p>
<p><i>NOTE: the exporter will determine the material associated with
a DTS Object(see next section) as the first material it finds when
exporting the first mesh of the DTS Object.</i></p>
<p>The exporter also allows you to export animated collision
meshes.&nbsp; This is accomplised by setting a "copy location"
constraint on the collision mesh with an armature bone as the target.<br>
</p>
<h3>Texturing/Materials<br>
</h3>
<p>Texturing your model is accomplished by UV mapping one or more image
textures to a mesh.&nbsp; The exporter will automatically generate a
default material based on the name of the image files that are
used.&nbsp; Options for each material can be found under the
"Materials" panel of the exporter GUI.&nbsp; The texture selection
pulldowns in this panel are populated using the names of images that
have been loaded in the UV/Image editor<br>
</p>
<p>If you wish to use the same base texture for multiple materials, add
".IGNORE*" to the end of the blender image name (ex: "myTex.IGNORE01",
"myTex.png.IGNORE.001", etc.).&nbsp;
Just prior to export, the exporter will strip off the "IGNORE" portion
of the material name and anything after it.&nbsp; This allows for the
export of multiple materials with the same (base texture) name, but
different properties.&nbsp; When generating a TSE (TGEA) material
script for a material containing "IGNORE", only the period delmited
section starting with "IGNORE" is stripped from the script material
name.&nbsp; For example, "myTex.IGNORE.001" would generated a TGEA
material called "myTex.001" with a base texture of "myTex". <br>
</p>
<p>&nbsp;If you wish to animate material visibility, you'll need to
perform the material setup the old way, as described below.<br>
</p>
<br>
<h3>Texturing/Materials (Old Setup)<br>
</h3>
<p>These instructions are valid for material setup prior to version
0.96 of the exporter.&nbsp; The exporter will draw it's default
material settings from these options when it is initially run, to ease
the transition to the new material system&nbsp; If your models are not
UV mapped, however, you will need to UV map them prior to exporting. <br>
</p>
<p>In order to apply textures to the model, one needs to assign one or
more blender materials to a mesh. In addition, the mesh has to have a
UV map. The name of the material in blender corresponds to the texture
torque
loads. e.g. if you had a material called "Bob", torque would try to
load "Bob.jpg" or "Bob.png" as the texture.<br>
NOTE: You should ensure that your Material contains at least 1 texture
channel which contains an Image texture for certain options to be taken
into account.
</p>
<p>
Since the properties of materials you can assign in torque itself are
not as sophisticated as the ones in blender, the exporter guesses many
things, including :
</p>
<ul>
  <li>If the emit of the material is higher than 0.0, the
material is marked as "Self Illuminating"</li>
  <li>If the first texture of the material does now have its
"MipMap" option set, no mipmaps will be generated for the material.</li>
  <li>If in the first texture channel of the material the "Alpha"
option is set in the "MapTo" options, then the material is marked as
translucent.
    <ul>
      <li>If the material is marked as translucent, and the alpha
of the material is lower than 1.0, the material is marked as blending
Additive.</li>
    </ul>
  </li>
  <li>Mapping a texture channel to reflectance sets it as a
reflectance map for the material.</li>
  <li>Mapping a texture channel to normals sets it as a bump map
for the material</li>
  <li>If there is another texture channel with neither
reflectance or normal mapping, then it is set as a detail map for the
material.</li>
</ul>
<h3>Additional Options</h3>
<p>From the exporter gui, you can also toggle which bones to
export on the "Armatures" tab.<br>
However, keep in mind that if you exclude a certain bone, all of its
child bones will be excluded as well, even if they have not been
specifically excluded.</p>
<p>Any options not covered in this document will either be
covered in
other documents, or on the blender forums referenced from the resource
page.</p>
<h2>License</h2>
<p>Copyright (c) 2003 - 2007 James Urquhart(j_urquhart (at)
btinternet.com)<br>
<br>
Permission is hereby granted, free of charge, to any person obtaining<br>
a copy of this software and associated documentation files (the<br>
"Software"), to deal in the Software without restriction, including<br>
without limitation the rights to use, copy, modify, merge, publish,<br>
distribute, sublicense, and/or sell copies of the Software, and to<br>
permit persons to whom the Software is furnished to do so, subject to<br>
the following conditions:<br>
<br>
The above copyright notice and this permission notice shall be<br>
included in all copies or substantial portions of the Software.<br>
<br>
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,<br>
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF<br>
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND<br>
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE<br>
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION<br>
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION<br>
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h2>Contact</h2>
James Urquhart<br>
E-Mail : j_urquhart (at) btinternet.com<br>
<a href="http://www.garagegames.com/blender"></a>Joseph Greenawalt:<br>
E-Mail : jsgreenawalt (at) gmail.com
</body>
</html>
